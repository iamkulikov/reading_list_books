# "Causal inference: the mixtape", Scott Cunnigham
https://mixtape.scunning.com/

[<< Все книги](../README.md)

## Рецензия

Крутейший учебник по статистической оценке эффектов с причинной интерпретацией - современный по покрытию результатов, с формальными и неформальными объяснениями, почему все работает. Джентельменский набор методов: инструментальные переменные, regression discontinuity, мэтчинг, разница в разницах, синтетический контроль. Понравилось критическое обсуждение реальных исследований, где конкретные методы были ключевым элементом + вопросы в них актуальны. К игрушечным примерам приведены программы (R, Python, Stata), поэтому крайне легко стартануть со своими данными. 


## Основные идеи

1. Без теории и DAGа, фиксирующего предпосылки, нельзя оценить никакие параметры модели с причинной интерпретацией, то есть вообще делать выводы о степени влияния. Отсутствие стрелки - не менее важная предпосылка, чем ее наличие.

2. Backdoor criterion: чтобы оценить causal effect, нужно закрыть все "открытые backdoor пути" от причины к следствию и в процессе не открыть новых. Если на конкретной цепочке нет коллайдеров (-> X <-), то нужно, чтобы какая-то из переменных была проконтролирована (боремся с omitted variable bias). Если есть коллайдеры, то нужно, чтобы эти переменные не контролировались (боремся с collider bias).

3. Иногда сама выборка (отбор в нее) - это часть причинно-следственной цепи.

4. Average treatment effect никогда не измерим, а только может быть оценен с очень специальными предпосылками, либо рандомизацией treatment-а. Средняя разница в outcome групп по определению раскладывается на  ATE (E[Y1] - E[Y0]) + selection bias (E[Y0|D=1]-E[Y0|D=0]) + heterogeneous treatment effect bias ((1-p)*(ATT-ATU)). Соответственно, даже знак ATE и средней разницы в общем случае отличается.

5. Закрытые backdoor пути ~ выполнена CIA (conditional independence assumption), т.е treatment и outcome независимы, при условии X-ов. Если предположить, что она работает, то контролируем covariates - обычно они все pre-treatment, поэтому экзогенны. Как контролировать? (1) Вычислять эффект в подгруппах (subclasiification по X-ам) и взвешивать его долями соответствующих X в контрольной выборке. Но это быстро натыкается на проклятие размерности. (2) Мэтчить прямо на уровне каждого отдельного объекта из экспериментальной выборки - с ближайшим объектом из контрольной (или взвешенным результатом для нескольких ближайших). Мэтчинг, как правило, неидеальный, поэтому остается смщение в X-ах - для этого есть корректировки, которые асимптотически убирают bias, причем можно увеличивать и контрольную группу только. (3) Использовать оценку вероятности treatment-а, propensity score, чтобы перевзвесить outcome по всем объектам или смэтчить их по одномерной характеристике (представляет всю нужную инфу из X-ов).

6. Regression discontinuity методы нужны, когда контрольная и экспериментальная выборка не пересекаются по X-ам. Тогда сравниваем близкие к границе выборок объекты, предполагая что на ней меняется только treatment. Получается LATE (local average treatment effect).

7. Инструментальная переменная позволяет выделить в объясняющей переменной, у которой есть ненаблюдаемый confounder, те колебания, которые с ним не связаны - тем самым оценить прямой эффект объясняющей на объясняемую переменную. Инструмент должен быть хорошо коррелирован с объясняющей, и (exclusion restriction) никак с confounder-ом и пропущенными переменными, ошибкой. Если treatment не однородный, то интерпретация коэффициента должна быть локальной - только влияние на тех, кто реагирует на инструмент. Это ухудшает внешнюю валидность - а точно ли можем распространить локальный эффект глобально?

8. Если есть панель и постоянная во времени ненаблюдаемая неоднородность (по объектам), то можно оценивать fixed effect модель - у нее есть шанс причинной интерпретации. Воздействие должно влиять только на результат того же периода, но может само меняться во времени. Кроме ненаблюдаемой неоднородности может быть наблюдаемая, но тоже неизменная во времени.

9.

10.


## Находки

1. Сложность в оценке влияния образования на доходы состоит в том, что фоновые причины (генетика, врожденные способности, ситуация в семье) часто не фиксируются, но могли влиять и на то, и на другое.

2. Плохо оценивать эффекты гендерной дискриминации, контролируя позицию/профессию сотрудника, потому что это хоть и закрывает backdoor путь D -> O -> Y, но вероятно открывает D -> O <- A -> Y. Это влияние способностей (A) и на сферу занятости / позицию (O) и на доходы (Y). Такой дизайн скорее снизит оценку эффекта дискриминации.

3. Если талант актера и его/ее красота некоррелированы, но если в "звездных актеров" отбирают по принципу комбинации таланта и красоты (например, отрежем верхние 10% по линейной комбинации этих свойств), то в итоговой выборке может создаться отрицательная корреляция между ними. Ничего причинного тут скорее всего нет.

4. Так как на вероятность остановки полицией человека может влиять степень подозрений, которые он вызывает, но она же может влиять и на вероятность применения силы, то есть почти неустранимая проблема с оценкой влияния расы на применение силы. Это происходит так как все административные данные самоотбирают случаи, где остановка человека произошла, то есть открывают backdoor path с коллайдером в виде собственно факта остановки. https://jmummolo.scholar.princeton.edu/publications/bias-built-how-administrative-records-mask-racially-biased-policing

5. Экономика учит, что наблюдаемые явления часто являются равновесием во взаимодействии агентов, которые что-то ограниченно оптимизируют, а значит чаще всего воздействие чаще всего нельзя назвать независимым от потенциальных результатов.

6. **Каверзный вопрос на школу.** Статистическая независимость treatment-a и результатов означает, что в каждой из групп (контрольной и экспериментальной) ожидаемые результаты были бы одинаковыми, при условии как наличия воздействия (в обеих группах), так и в случае его отсутствия.

7. P-value для оценки эффекта воздействия получаем из рандомизации treatment-а. Используем предположение о sharp zero, т.е. все индвидуальные эффекты положим равными нулю. Перетасовываем случайно группы (контрольную и воздействия) и вычисляем статистику (например, разницу между средними значениями), получаем распределение статистики в sharp-zero предпосылках. Сравниваем фактическое значение статистики и полученное распределение - делаем вывод о редкости.

8. Young, Alwyn. 2019. “Chanelling Fisher: Randomization Tests and the Statistical Insignificance of Seemingly Significant Experimental Results.” Quarterly Journal of Economics 134 (2): 557–98.: "With the removal of just one observation, 35% of 0.01-significant reported results in the average paper can be rendered insignificant at that level. Conversely, 16% of 0.01-insignificant reported results can be found to be significant at that level."

9. Young: "In the typical paper, randomization inference found individual treatment effects that were 13 to 22 percent fewer significant results than what the authors’ own analysis had discovered".

10. As such, propensity score matching has not seen as wide adoption among economists as in other non-experimental methods like regression discontinuity or difference-in-differences. The most common reason given for this is that economists are oftentimes skeptical that CIA can be achieved in any data set—almost as an article of faith. This is because for many applications, economists as a group are usually more concerned about selection on unobservables than they are selection on observables, and as such, they reach for matching methods less often.

11. Инструментальная переменная должна ощущаться как странная, непонятно как связанная с объясняемой. Это отражение предпосылки "only through". Пол первых двух детей влияет на вероятность заведения третьего (если одинаковые, то выше), поэтому его можно использовать как инструмент при оценке влияния величины семьи, например, на заработок матери. Цены на метамфетамин -> употребление метамфетамина родителями -> попадание детей в детский дом. Квартал дня рождения -> количство лет обучения в школе -> заработок во взрослом ворасте.

12. LIML значительно снидает смещение 2SLS для оценок со слабыми инструментами на конечных выборках. Но конечно в идеале надо поискать инструменты посильнее.

13. Оценка FE модели - это то же самое, что и обычным OLS оценить регрессию с demeaned (во времени) регрессорами и Y.

14. Проститутки с распространением интернета стали менее зависимы от сутенеров, более осознанно шли в профессиию, больше получали денег, переместились indoor. По цене дифференцируют расу (белым меньше), красоте (но с красивых больше берут, так как они предположительно богаче). Белые и более образованные проститутки получают больше, как и с меньшим BMI.

15.

16.

## Мои идеи

1. Нет ли в примере про spurious отрицательную корреляцию между красотой и талантом базы для когнитивного искажения? Ведь в сферу нашего внимания, людей про которых мы думаем, тоже наверное самоотбираются люди по комбинации каких-то важных признаков, и там тоже наверное можно усмотреть отрицательную корреляцию в итоге?

2. Каковы источники эндогенности в стандартных моделях валютного курса?

3. 


## Теги

Причинность, DAG, гипотетическая альтернатива, мэтчинг, инструментальные переменные, difference-in-difference, синтетический контроль

## Жанр/тема

Эконометрика

## Оценка внутри жанра

9

## Когда прочел

10.09.2023